{"componentChunkName":"component---src-templates-detail-js","path":"/detail/2","result":{"data":{"markdownRemark":{"html":"<h4 id=\"使用方法\" style=\"position:relative;\"><a href=\"#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95\" aria-label=\"使用方法 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使用方法</h4>\n\n        <deckgo-highlight-code   terminal=\"carbon\" line-numbers=\"true\" >\n          <code slot=\"code\">try {\n\tnew Joi()\n\t.data(&#39;李四&#39;, &#39;姓名&#39;).required().chinese()\n\t.data(&#39;张三&#39;, &#39;姓名&#39;).required().chinese(&#39;名字只可以是中文哦！&#39;)\n\t.data(&#39;1&#39;, &#39;性别&#39;).required().enum([&#39;1&#39;, &#39;2&#39;])\n\t// 这里写正常逻辑\n} catch (error) {\n\t// 这里提示错误消息\n\tconsole.log(error)\n}</code>\n        </deckgo-highlight-code>\n      \n<h4 id=\"源码-使用了-moment\" style=\"position:relative;\"><a href=\"#%E6%BA%90%E7%A0%81-%E4%BD%BF%E7%94%A8%E4%BA%86-moment\" aria-label=\"源码 使用了 moment permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>源码, 使用了 moment</h4>\n\n        <deckgo-highlight-code   terminal=\"carbon\" line-numbers=\"true\" >\n          <code slot=\"code\">import moment from &#39;moment&#39;\nexport default class Joi {\n\tvalue = &#39;&#39;\n\tname = &#39;&#39;\n\n\t// 数据输入\n\tdata(value, name = &#39;&#39;) {\n\t\tthis.value = value\n\t\tthis.name = name\n\t\treturn this\n\t}\n\n\t// 必填，不能为空\n\trequired(message = `${this.name}不能为空`) {\n\t\tif (\n\t\t\t/^\\s*$/g.test(this.value) ||\n\t\t\tthis.value === null ||\n\t\t\tthis.value === undefined\n\t\t) {\n\t\t\tthrow message\n\t\t}\n\t\treturn this\n\t}\n\n\t// 最小长度\n\tminLength(length = 6, message = `${this.name}长度不能小于${length}位`) {\n\t\tif (this.value.length &lt; length) {\n\t\t\tthrow message\n\t\t}\n\t\treturn this\n\t}\n\n\t// 最大长度\n\tmaxLength(length = 6, message = `${this.name}长度不能超过${length}位`) {\n\t\tif (this.value.length &gt; length) {\n\t\t\tthrow message\n\t\t}\n\t\treturn this\n\t}\n\n\t// 固定长度\n\tlength(length = 6, message = `${this.name}长度必须为${length}位`) {\n\t\tif (this.value.length !== length) {\n\t\t\tthrow message\n\t\t}\n\t\treturn this\n\t}\n\n\t// 整数\n\tinteget(message = `${this.name}必须为整数`) {\n\t\tif (Number(this.value) === &#39;NaN&#39;) {\n\t\t\tthrow message\n\t\t}\n\t\treturn this\n\t}\n\n\t// 数字\n\tnumber(message = `${this.name}要是数字格式`) {\n\t\tif (!/^\\+?[1-9][0-9]+.?[0-9]*$/.test(this.value)) {\n\t\t\tthrow message\n\t\t}\n\t\treturn this\n\t}\n\n\t// 不等于\n\tnot(num = 0, message = `${this.name}不可以等于${num}`) {\n\t\tif (Number(this.value) === num) {\n\t\t\tthrow message\n\t\t}\n\t\treturn this\n\t}\n\n\t// 等于\n\teq(num = 0, message = `${this.name}要等于${num}`) {\n\t\tif (Number(this.value) !== num) {\n\t\t\tthrow message\n\t\t}\n\t\treturn this\n\t}\n\n\t// 相等\n\tequals(value, message = &#39;两次密码不一致&#39;) {\n\t\tif (this.value !== value) {\n\t\t\tthrow message\n\t\t}\n\t\treturn this\n\t}\n\n\t// 大于\n\tgt(num = 0, message = `${this.name}要大于${num}`) {\n\t\tif (Number(this.value) &lt;= num) {\n\t\t\tthrow message\n\t\t}\n\t\treturn this\n\t}\n\n\t// 大于或等于\n\tgte(num = 0, message = `${this.name}要大于或等于${num}`) {\n\t\tif (Number(this.value) &lt; num) {\n\t\t\tthrow message\n\t\t}\n\t\treturn this\n\t}\n\n\t// 小于\n\tlt(num = 0, message = `${this.name}要小于${num}`) {\n\t\tif (Number(this.value) &gt;= num) {\n\t\t\tthrow message\n\t\t}\n\t\treturn this\n\t}\n\n\t// 小于或等于\n\tlte(num = 0, message = `${this.name}要小于或等于${num}`) {\n\t\tif (Number(this.value) &gt; num) {\n\t\t\tthrow message\n\t\t}\n\t\treturn this\n\t}\n\n\t// 之间, 大于并小于\n\tbetween(nums = [0, 100], message = `${this.name}要在${nums[0]}至${nums[1]}之间`) {\n\t\tlet num = Number(this.value)\n\t\tif (num &gt;= nums[0] &amp;&amp; num &lt;= nums[0]) {\n\t\t\treturn this\n\t\t}\n\t\tthrow message\n\t}\n\n\t// 最小\n\tmin(num = 0, message = `${this.name}最小值为${num}`) {\n\t\tif (Number(this.value) &lt; num) {\n\t\t\tthrow message\n\t\t}\n\t\treturn this\n\t}\n\n\t// 最大\n\tmax(num = 100, message = `${this.name}最大值为${num}`) {\n\t\tif (Number(this.value) &gt; num) {\n\t\t\tthrow message\n\t\t}\n\t\treturn this\n\t}\n\n\t// 手机号\n\tmobile(message = &quot;手机号不正确&quot;) {\n\t\tif (!/^1[3-9]\\d{9}$/.test(this.value)) {\n\t\t\tthrow message\n\t\t}\n\t\treturn this\n\t}\n\n\t// 年龄\n\tage(arr = [0, 129], message = &quot;年龄不正确&quot;) {\n\t\tlet age = parseInt(this.value, 10)\n\t\tif (age &gt; arr[1] || age &lt; arr[0]) {\n\t\t\tthrow message\n\t\t}\n\t\treturn this\n\t}\n\n\t// 日期\n\tdate(format = &#39;YYYY-MM-DD&#39;, message = `${this.name || &#39;日期&#39;}不正确`) {\n\t\tif (this.value.length !== format.length) {\n\t\t\tthrow message\n\t\t}\n\t\tif (!moment(this.value, format).isValid()) {\n\t\t\tthrow message\n\t\t}\n\t\treturn this\n\t}\n\n\t// 日期是否之前\n\tisBefore(date, message = `${this.name || &#39;日期&#39;}请选择${date}之前的日期`) {\n\t\tif (!moment(this.value).isBefore(date)) {\n\t\t\tthrow message\n\t\t}\n\t\treturn this\n\t}\n\n\t// 日期是否之后\n\tisAfter(date, message = `${this.name || &#39;日期&#39;}请选择${date}之后的日期`) {\n\t\tif (!moment(this.value).isAfter(date)) {\n\t\t\tthrow message\n\t\t}\n\t\treturn this\n\t}\n\n\t// 日期是否相同\n\tisSame(date, message = `${this.name || &#39;日期&#39;}请选择${date}`) {\n\t\tif (!moment(this.value).isSame(date)) {\n\t\t\tthrow message\n\t\t}\n\t\treturn this\n\t}\n\n\t// 日期是否之间\n\tisBetween(dates = [moment().format(&#39;YYYY-MM-DD&#39;), moment().add(&#39;day&#39;, 1).format(&#39;YYYY-MM-DD&#39;)], message = `${this.name || &#39;日期&#39;}请选择${dates[0]}至${dates[1]}`) {\n\t\tif (!moment(this.value).isBetween(dates[0], dates[1])) {\n\t\t\tthrow message\n\t\t}\n\t\treturn this\n\t}\n\n\t// 字母\n\tletter(message = `${this.name}必须为英文`) {\n\t\tif (!/^[A-Za-z]+$/g.test(this.value)) {\n\t\t\tthrow message\n\t\t}\n\t\treturn this\n\t}\n\n\t// 中文\n\tchinese(message = `${this.name}必须为中文`) {\n\t\tif (!/^[\\u4e00-\\u9fa5]+$/g.test(this.value)) {\n\t\t\tthrow message\n\t\t}\n\t\treturn this\n\t}\n\n\t// 枚举\n\tenum(arr = [], message = `${this.name}值必须为${arr.join(&#39;,&#39;)}中的一个`) {\n\t\tif (arr.indexOf(this.value) === -1) {\n\t\t\tthrow message\n\t\t}\n\t\treturn this\n\t}\n\n\t// 身份证\n\tidCard(message = &#39;身份证不合法&#39;) {\n\t\tif (this.value.length !== 18) {\n\t\t\tthrow message\n\t\t}\n\t\tlet city = [&quot;11&quot;, &quot;12&quot;, &quot;13&quot;, &quot;14&quot;, &quot;15&quot;, &quot;21&quot;, &quot;22&quot;, &quot;23&quot;, &quot;31&quot;, &quot;32&quot;, &quot;33&quot;, &quot;34&quot;, &quot;35&quot;, &quot;36&quot;, &quot;37&quot;, &quot;41&quot;, &quot;42&quot;, &quot;43&quot;, &quot;44&quot;, &quot;45&quot;, &quot;46&quot;, &quot;50&quot;, &quot;51&quot;, &quot;52&quot;, &quot;53&quot;, &quot;54&quot;, &quot;61&quot;, &quot;62&quot;, &quot;63&quot;, &quot;64&quot;, &quot;65&quot;, &quot;71&quot;, &quot;81&quot;, &quot;82&quot;, &quot;91&quot;]\n\t\tif (!/^\\d{6}(18|19|20)?\\d{2}(0[1-9]|1[12])(0[1-9]|[12]\\d|3[01])\\d{3}(\\d|X)$/i.test(this.value)) {\n\t\t\tthrow message\n\t\t}\n\t\tif (city.indexOf(this.value.substr(0, 2)) === -1) {\n\t\t\tthrow message\n\t\t}\n\t\tlet id_array = [...this.value]\n\t\t//加权因子\n\t\tlet factor = [7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2]\n\t\t//校验位\n\t\tlet parity = [&#39;1&#39;, &#39;0&#39;, &#39;X&#39;, &#39;9&#39;, &#39;8&#39;, &#39;7&#39;, &#39;6&#39;, &#39;5&#39;, &#39;4&#39;, &#39;3&#39;, &#39;2&#39;]\n\t\tlet sum = 0\n\t\tfor (let i = 0; i &lt; 17; i++) {\n\t\t\tsum += parseInt(id_array[i], 10) * parseInt(factor[i], 10)\n\t\t}\n\t\tif (id_array[17].toUpperCase() !== parity[sum % 11].toUpperCase()) {\n\t\t\tthrow message\n\t\t}\n\t\treturn this\n\t}\n\n\t// 邮箱\n\temail(message = &#39;邮箱不合法&#39;) {\n\t\tif (!/^[a-z0-9]+([._\\\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/.test(this.value)) {\n\t\t\tthrow message\n\t\t}\n\t\treturn this\n\t}\n\n\t// 自定义正则\n\tregexp(reg, message = `${this.name}格式不正确`) {\n\t\tif (!reg.test(this.value)) {\n\t\t\tthrow message\n\t\t}\n\t\treturn this\n\t}\n}</code>\n        </deckgo-highlight-code>\n      ","timeToRead":4,"tableOfContents":"<ul>\n<li><a href=\"/blog/detail/2/#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95\">使用方法</a></li>\n<li><a href=\"/blog/detail/2/#%E6%BA%90%E7%A0%81-%E4%BD%BF%E7%94%A8%E4%BA%86-moment\">源码, 使用了 moment</a></li>\n</ul>","frontmatter":{"date":"2019-04-27","path":"/detail/2","title":"react 链式写法校验数据","featuredImage":{"childImageSharp":{"fluid":{"aspectRatio":1.7699115044247788,"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAQFAQP/xAAXAQADAQAAAAAAAAAAAAAAAAAAAQID/9oADAMBAAIQAxAAAAHnlFjOoY6D/8QAHBAAAgICAwAAAAAAAAAAAAAAAQIAAxESISIx/9oACAEBAAEFAl4At2h9rAwVWMO3/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGRAAAwADAAAAAAAAAAAAAAAAABAxAREy/9oACAEBAAY/Aps5UJhf/8QAGRAAAwEBAQAAAAAAAAAAAAAAAAERIaHB/9oACAEBAAE/IW3K2cih7SMi8hVYf//aAAwDAQACAAMAAAAQZA//xAAWEQEBAQAAAAAAAAAAAAAAAAABECH/2gAIAQMBAT8QTZ//xAAXEQADAQAAAAAAAAAAAAAAAAAAARFR/9oACAECAQE/EKsKf//EABwQAQACAwADAAAAAAAAAAAAAAEAIRFBcTFRYf/aAAgBAQABPxCmpejXY3kq7Ptw85thbMwFD4YcABP/2Q==","sizes":"(max-width: 800px) 100vw, 800px","src":"/blog/static/140d93ed1c6c3b0967369d03de9422f3/14b42/featured.jpg","srcSet":"/blog/static/140d93ed1c6c3b0967369d03de9422f3/f836f/featured.jpg 200w,\n/blog/static/140d93ed1c6c3b0967369d03de9422f3/2244e/featured.jpg 400w,\n/blog/static/140d93ed1c6c3b0967369d03de9422f3/14b42/featured.jpg 800w,\n/blog/static/140d93ed1c6c3b0967369d03de9422f3/47498/featured.jpg 1200w,\n/blog/static/140d93ed1c6c3b0967369d03de9422f3/7f945/featured.jpg 1440w"}}}}}},"pageContext":{}}}