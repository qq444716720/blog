{"componentChunkName":"component---src-templates-detail-js","path":"/detail/1","result":{"data":{"markdownRemark":{"html":"<h4 id=\"1-安装-codepush-cli\" style=\"position:relative;\"><a href=\"#1-%E5%AE%89%E8%A3%85-codepush-cli\" aria-label=\"1 安装 codepush cli permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 安装 CodePush CLI</h4>\n\n        <deckgo-highlight-code   terminal=\"carbon\" line-numbers=\"true\" >\n          <code slot=\"code\">npm install -g code-push-cli</code>\n        </deckgo-highlight-code>\n      \n<h4 id=\"2-注册-codepush-账号\" style=\"position:relative;\"><a href=\"#2-%E6%B3%A8%E5%86%8C-codepush-%E8%B4%A6%E5%8F%B7\" aria-label=\"2 注册 codepush 账号 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 注册 CodePush 账号</h4>\n\n        <deckgo-highlight-code   terminal=\"carbon\" line-numbers=\"true\" >\n          <code slot=\"code\">code-push register</code>\n        </deckgo-highlight-code>\n      \n<blockquote>\n<p>⚠️ 这里会弹出一个网页选择 <code>github</code> 授权， 注册成功后会得到一个 <code>key</code> , 将 <code>key</code> 复制到终端回车</p>\n</blockquote>\n<h4 id=\"3-添加-ios-平台应用\" style=\"position:relative;\"><a href=\"#3-%E6%B7%BB%E5%8A%A0-ios-%E5%B9%B3%E5%8F%B0%E5%BA%94%E7%94%A8\" aria-label=\"3 添加 ios 平台应用 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 添加 ios 平台应用</h4>\n\n        <deckgo-highlight-code   terminal=\"carbon\" line-numbers=\"true\" >\n          <code slot=\"code\">code-push app add rebooking-ios ios react-native</code>\n        </deckgo-highlight-code>\n      \n<p>得到下面的两个 <code>key</code> ， 后面会用到</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/cf49e74de01976c42a481059418c9ec3/5caea/key.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 20.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAPoAAAD6AG1e1JrAAAAyUlEQVQI1yWO606EMBhEeQh/iBF3Cy3S9uu9lNou0r0YYjTG938aYU1OTiaZHzMVZrodBOEaU9VR2YPtmMJM9WB62Cs55uXzN9++8sf3vP6IqfBxhvAu4rmi8028FYgLzheSCvWJ6YnbKGwEE5mZqA5EuFcVBps6GRD3iLsWfAuusvmcyroNPr6g+tDWzfGpOdbN4c5/Rg/1MzejjguiBoMj4DH4XvhKjicd8iAdHgSmgmzPqdxM2G68B8VMjGXdsOni8zWc7szXPxrEK/foYZURAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ios\"\n        title=\"ios\"\n        src=\"/blog/static/cf49e74de01976c42a481059418c9ec3/5a190/key.png\"\n        srcset=\"/blog/static/cf49e74de01976c42a481059418c9ec3/772e8/key.png 200w,\n/blog/static/cf49e74de01976c42a481059418c9ec3/e17e5/key.png 400w,\n/blog/static/cf49e74de01976c42a481059418c9ec3/5a190/key.png 800w,\n/blog/static/cf49e74de01976c42a481059418c9ec3/5caea/key.png 996w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h4 id=\"4-添加-android-平台应用\" style=\"position:relative;\"><a href=\"#4-%E6%B7%BB%E5%8A%A0-android-%E5%B9%B3%E5%8F%B0%E5%BA%94%E7%94%A8\" aria-label=\"4 添加 android 平台应用 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. 添加 android 平台应用</h4>\n\n        <deckgo-highlight-code   terminal=\"carbon\" line-numbers=\"true\" >\n          <code slot=\"code\">code-push app add rebooking-android android react-native</code>\n        </deckgo-highlight-code>\n      \n<p>得到的东西和 ios 一样</p>\n<p>进入 <a href=\"https://appcenter.ms/\">https://appcenter.ms/</a> 可以看到你刚才创建的app， 如下图</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/adc2538f7ffdd41b482dad42ed10ac37/7a4b2/appcenter.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.500000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAPoAAAD6AG1e1JrAAAA/0lEQVQY032P206DQBCGeWYrhWptq9YmvowvwYVcGWt6Q2K0rQkgh122yx7YEw7E3hm/TCb/TPafmfUW8+Xqbn3/sFmsbsPrm6v50g9ml8FsMg0nfvBnXPiBPw0fN2uv/DySpiGEaK0ppXmW9f/ixtwZ97xn3v5wOH4N1Aht33ZRFAkhlFKy66QcAmBcEEq5EA05IYR6ZzFlTy+5V1VVOcIZlQwba+G1O2MHDJcqqzA6MchJkqRpCpN7p71i5LuoOK0NeyekbSkFk7NgddbYTnZwKzQG0fdN02xft1pp5/pfc1mUpEU5/6grNEyFv503G2Og1EoxxkBgjOM4hj7oHxzROcsxm+d9AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"appcenter\"\n        title=\"appcenter\"\n        src=\"/blog/static/adc2538f7ffdd41b482dad42ed10ac37/5a190/appcenter.png\"\n        srcset=\"/blog/static/adc2538f7ffdd41b482dad42ed10ac37/772e8/appcenter.png 200w,\n/blog/static/adc2538f7ffdd41b482dad42ed10ac37/e17e5/appcenter.png 400w,\n/blog/static/adc2538f7ffdd41b482dad42ed10ac37/5a190/appcenter.png 800w,\n/blog/static/adc2538f7ffdd41b482dad42ed10ac37/c1b63/appcenter.png 1200w,\n/blog/static/adc2538f7ffdd41b482dad42ed10ac37/7a4b2/appcenter.png 1240w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<hr>\n<h5 id=\"下面开始整合到-react-native\" style=\"position:relative;\"><a href=\"#%E4%B8%8B%E9%9D%A2%E5%BC%80%E5%A7%8B%E6%95%B4%E5%90%88%E5%88%B0-react-native\" aria-label=\"下面开始整合到 react native permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>下面开始整合到 react-native</h5>\n<h4 id=\"5-react-native-中安装-code-push-组件\" style=\"position:relative;\"><a href=\"#5-react-native-%E4%B8%AD%E5%AE%89%E8%A3%85-code-push-%E7%BB%84%E4%BB%B6\" aria-label=\"5 react native 中安装 code push 组件 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. react-native 中安装 code-push 组件</h4>\n\n        <deckgo-highlight-code   terminal=\"carbon\" line-numbers=\"true\" >\n          <code slot=\"code\">npm install react-native-code-push --save</code>\n        </deckgo-highlight-code>\n      \n<h4 id=\"6-添加原生依赖，-使用-link-到-android-和-ios-中\" style=\"position:relative;\"><a href=\"#6-%E6%B7%BB%E5%8A%A0%E5%8E%9F%E7%94%9F%E4%BE%9D%E8%B5%96%EF%BC%8C-%E4%BD%BF%E7%94%A8-link-%E5%88%B0-android-%E5%92%8C-ios-%E4%B8%AD\" aria-label=\"6 添加原生依赖， 使用 link 到 android 和 ios 中 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6. 添加原生依赖， 使用 link 到 android 和 ios 中</h4>\n\n        <deckgo-highlight-code   terminal=\"carbon\" line-numbers=\"true\" >\n          <code slot=\"code\">react-native link react-native-code-push</code>\n        </deckgo-highlight-code>\n      \n<blockquote>\n<p>如果 <code>link</code> 的时候出现 <code>rnpm-install ERR! ERRPACKAGEJSON No package found. Are you sure this i a React Native project? Package name not found in ...</code>等， 请使用新版本的<code>react-native</code> 版本<code>react-native init MyApp --version 0.59.5</code> 我这里使用 59</p>\n</blockquote>\n<p>运行react-native link的时候，命令行会提示输入部署码<code>What is your CodePush deployment key for Android (hit &#x3C;ENTER> to ignore)</code>\n这个时候将你<code>Android</code> 中 <code>Production</code> 的 <code>Deployment Key</code> 粘贴回程。 <code>ios</code> 同理。</p>\n<h4 id=\"7-将-android-和-ios-的版本号改为-100\" style=\"position:relative;\"><a href=\"#7-%E5%B0%86-android-%E5%92%8C-ios-%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E6%94%B9%E4%B8%BA-100\" aria-label=\"7 将 android 和 ios 的版本号改为 100 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>7. 将 Android 和 ios 的版本号改为 1.0.0</h4>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/2025f42bbc1f16c1c6c9562917768ba1/a8417/Android%E7%89%88%E6%9C%AC%E5%8F%B7%E4%BF%AE%E6%94%B9.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAPoAAAD6AG1e1JrAAABHklEQVQY0z1Qa2+DMAzk//+3Sv2wdkPtytQW8iIvRAgBEu9otZ0i6+T47LOr9nlpmk/vxTBI7+UYdM5BSNZ1Xd/3zjljDIh+ca3NFKeUUpwjXnW/fyNJtJWcSllKSUSLEFwppbVmjHnvx3FEDFMAmaYphLCuKxFVyjj0pT+UUhDFC9u2IV6vV0SIYcFa+26Xc0Zl1TL2cTrBmLX7Hz6GYXg8HhCgfYxxt2AMpjkL4w55DH+PqZ5ddzwe67qWQr4tQdC2LeccYilEc7tp3SurhtEvKaFmnuect13MhQTKC/+2oWSMgzjvD4fDV325d0+l4M5xIUDmGQeiqvlpzuczbgMZNsGe+86c9Yov0UvRSslhOS2BKBPhTihY9+vm9Av+8YsUM0QyaQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Android版本号修改.png\"\n        title=\"Android版本号修改.png\"\n        src=\"/blog/static/2025f42bbc1f16c1c6c9562917768ba1/5a190/Android%E7%89%88%E6%9C%AC%E5%8F%B7%E4%BF%AE%E6%94%B9.png\"\n        srcset=\"/blog/static/2025f42bbc1f16c1c6c9562917768ba1/772e8/Android%E7%89%88%E6%9C%AC%E5%8F%B7%E4%BF%AE%E6%94%B9.png 200w,\n/blog/static/2025f42bbc1f16c1c6c9562917768ba1/e17e5/Android%E7%89%88%E6%9C%AC%E5%8F%B7%E4%BF%AE%E6%94%B9.png 400w,\n/blog/static/2025f42bbc1f16c1c6c9562917768ba1/5a190/Android%E7%89%88%E6%9C%AC%E5%8F%B7%E4%BF%AE%E6%94%B9.png 800w,\n/blog/static/2025f42bbc1f16c1c6c9562917768ba1/a8417/Android%E7%89%88%E6%9C%AC%E5%8F%B7%E4%BF%AE%E6%94%B9.png 941w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/d875ac9e3481eec5fde4bae2cce7c044/e2310/IOS%E7%89%88%E6%9C%AC%E5%8F%B7%E4%BF%AE%E6%94%B9.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 20.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAPoAAAD6AG1e1JrAAAA4ElEQVQI1yWPWUvDUBSE80NErFhscvcl1yZNogTEhSr6JCXV3JuY0loqgboV8tD+c4/25YOBmTlzvJ+vdt0ua2eb2i0Xs/HDowm1In2CkZTyPB0JRo2WWnLBiBIsOgslp/HQAL2qLHbb7ffnRzF5ss+Ty+u7+KYg0W2fJn9uThlBEA6VAMkpBrknQb5nq2rTdet2VbmycdP8/uU4tb20PoymCAXYP4VrSRxlyShLkn/GoVJaCooD731e7rrN22L+6uysqcdXeXBywP0jNujhYAD1QKNFfpENjYai/Qr4AsK/lTs9WVnlLfoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"IOS版本号修改.png\"\n        title=\"IOS版本号修改.png\"\n        src=\"/blog/static/d875ac9e3481eec5fde4bae2cce7c044/5a190/IOS%E7%89%88%E6%9C%AC%E5%8F%B7%E4%BF%AE%E6%94%B9.png\"\n        srcset=\"/blog/static/d875ac9e3481eec5fde4bae2cce7c044/772e8/IOS%E7%89%88%E6%9C%AC%E5%8F%B7%E4%BF%AE%E6%94%B9.png 200w,\n/blog/static/d875ac9e3481eec5fde4bae2cce7c044/e17e5/IOS%E7%89%88%E6%9C%AC%E5%8F%B7%E4%BF%AE%E6%94%B9.png 400w,\n/blog/static/d875ac9e3481eec5fde4bae2cce7c044/5a190/IOS%E7%89%88%E6%9C%AC%E5%8F%B7%E4%BF%AE%E6%94%B9.png 800w,\n/blog/static/d875ac9e3481eec5fde4bae2cce7c044/e2310/IOS%E7%89%88%E6%9C%AC%E5%8F%B7%E4%BF%AE%E6%94%B9.png 968w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h4 id=\"8-在-react-native-项目中的首页中-使用-code-push\" style=\"position:relative;\"><a href=\"#8-%E5%9C%A8-react-native-%E9%A1%B9%E7%9B%AE%E4%B8%AD%E7%9A%84%E9%A6%96%E9%A1%B5%E4%B8%AD-%E4%BD%BF%E7%94%A8-code-push\" aria-label=\"8 在 react native 项目中的首页中 使用 code push permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>8. 在 react-native 项目中的首页中 使用 code-push</h4>\n\n        <deckgo-highlight-code   terminal=\"carbon\" line-numbers=\"true\" >\n          <code slot=\"code\">/**\n * Sample React Native App\n * https://github.com/facebook/react-native\n *\n * @format\n * @flow\n */\n\nimport React, {Component} from &#39;react&#39;;\nimport {Platform, StyleSheet, Text, View} from &#39;react-native&#39;;\nimport CodePush from &quot;react-native-code-push&quot;;\nconst instructions = Platform.select({\n  ios: &#39;Press Cmd+R to reload,\\n&#39; + &#39;Cmd+D or shake for dev menu&#39;,\n  android:\n    &#39;Double tap R on your keyboard to reload,\\n&#39; +\n    &#39;Shake or press menu button for dev menu&#39;,\n});\n\nexport default class App extends Component {\n\n  componentDidMount(){\n    CodePush.sync({\n      //安装模式\n      //ON_NEXT_RESUME 下次恢复到前台时\n      //ON_NEXT_RESTART 下一次重启时\n      //IMMEDIATE 马上更新\n      installMode : CodePush.InstallMode.IMMEDIATE ,\n      //对话框\n      updateDialog : {\n          //是否显示更新描述\n          appendReleaseDescription : true ,\n          //更新描述的前缀。 默认为&quot;Description&quot;\n          descriptionPrefix : &quot;更新内容：&quot; ,\n          //强制更新按钮文字，默认为continue\n          mandatoryContinueButtonLabel : &quot;立即更新&quot; ,\n          //强制更新时的信息. 默认为&quot;An update is available that must be installed.&quot;\n          mandatoryUpdateMessage : &quot;必须更新后才能使用&quot; ,\n          //非强制更新时，按钮文字,默认为&quot;ignore&quot;\n          optionalIgnoreButtonLabel : &#39;稍后&#39; ,\n          //非强制更新时，确认按钮文字. 默认为&quot;Install&quot;\n          optionalInstallButtonLabel : &#39;后台更新&#39; ,\n          //非强制更新时，检查到更新的消息文本\n          optionalUpdateMessage : &#39;有新版本了，是否更新？&#39; ,\n          //Alert窗口的标题\n          title : &#39;更新提示&#39;\n        }\n      }\n    );\n  }\n\n  render() {\n    return (\n      &lt;View style={styles.container}&gt;\n        &lt;Text style={styles.welcome}&gt;Welcome to React Native!&lt;/Text&gt;\n        &lt;Text style={styles.instructions}&gt;To get started, edit App.js&lt;/Text&gt;\n        &lt;Text style={styles.instructions}&gt;{instructions}&lt;/Text&gt;\n      &lt;/View&gt;\n    );\n  }\n}</code>\n        </deckgo-highlight-code>\n      \n<h4 id=\"9-发布更新\" style=\"position:relative;\"><a href=\"#9-%E5%8F%91%E5%B8%83%E6%9B%B4%E6%96%B0\" aria-label=\"9 发布更新 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>9. 发布更新</h4>\n\n        <deckgo-highlight-code   terminal=\"carbon\" line-numbers=\"true\" >\n          <code slot=\"code\">code-push release-react rebooking-ios ios -d Production\ncode-push release-react rebooking-android android -d Production</code>\n        </deckgo-highlight-code>\n      \n<p>最后打开手机查看效果\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/1c20a7c16104e546639f9a51e1158318/7a4b2/result.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAPoAAAD6AG1e1JrAAABIUlEQVQY031P207CQBDdrzf6In9i7AeYIGiX4iWpL4ZCpIClxba73WWvNUEOKw8+eTKZnJnMmTlD6N0wjuljTC8ur25uo+FoFGI8vB+NH9CmMZ2EAKF0kkySaZIkb6/Tl+cnsvrIm6ZRao/c9/3Pv3Des6YuGnE9bpO1IcvlsizLtm2xbzAYRFG02WwYY1prY4wLMMZqrbwVxjopRMtFuuYlU2S73dZ1/RWQZdlisRBCQNZ1XVEUIN57Y7RpM9PM/L6yrofNb6e9NWQ+n+8CcArGDocDpuFfSgk74bD3Vnn2Ltmu5zN3Eiu5R9Ikz3NchhgVZO487iGGF2xED7YV/zwprQKXAbBG0jRdBaD+K+acV1X1y/Ew45023lg8fwaOHQHk+34qnevbxQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"result.png\"\n        title=\"result.png\"\n        src=\"/blog/static/1c20a7c16104e546639f9a51e1158318/5a190/result.png\"\n        srcset=\"/blog/static/1c20a7c16104e546639f9a51e1158318/772e8/result.png 200w,\n/blog/static/1c20a7c16104e546639f9a51e1158318/e17e5/result.png 400w,\n/blog/static/1c20a7c16104e546639f9a51e1158318/5a190/result.png 800w,\n/blog/static/1c20a7c16104e546639f9a51e1158318/c1b63/result.png 1200w,\n/blog/static/1c20a7c16104e546639f9a51e1158318/7a4b2/result.png 1240w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<blockquote>\n<p>关于自定义更新弹框 ，参照下面的文章</p>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/eb47909ff50e4eea57ccb846d793bca2/b4098/image.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 157%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAfCAIAAABoLHqZAAAACXBIWXMAAAPoAAAD6AG1e1JrAAAElUlEQVQ4y4WV32/TVhTH81/tff8DL9vTJNC0SXtiRdoeBqGlDWlJnMSxnToMOgZ0aN3UjtLQpj/oT6AkJUVtaGmqEtuxYzv+ETuJHce+O04pIwW6r45OruP7Oeeeo3uvA6aptyyb44UKL3B89fDobZnl3pQOS2zliOFYjudFiRX8V0ylwoLBTKEq1hSzZQU4sWEYZrUqA1MVZYatlIFhK9zLLYGrQFBegLmioqiyonNVuaYocq1WU1RdrweqitUwVU0VazJvt0xdk2uS0GrodrFQEypSTarJkiyLjUbdbFrliqSqgEqqpqiqEmBkpSyqjKiytXqRkQ4FhVe0/YrCaS2EOgg5CLkIWZ5nuJ6BUAMhE7zn+T6ws7dTOnpzWD7MbW/ltl8WdreL+ztrz5893dx4e7TLMHvFYk5RGJjquvX35oF59cDG+tzqyuON9WxmZmJ35/ne69z+Xr5QWNvKr7x69eygtL2+MV8VDhFq+oxnfGiBfH5tYeHR7OxkofAUlodQq2swsE8ebdc1Ox3NcXzrgVUoVi6rCmNZGkJtyHBCtk/gZnfc6Rbv9sDT05Pz84+zc5m52ZlsNrO29mRhYfbR9OTU1MTi4tzq6tLy8iJMyGSm79+/8+DBXcfRoWfHJQSuXh0YGgr39w9euxYKhcI3RqKhofDV4EDwSv/10DA8jgxHhgbDA/2Dly79dPly0DSl4+b5MEWmcByPYTHwNE2PdpXuavRD0ek0TY+NjdWN6n9wEieCwSt9fX3BYBDmpD4lKpUaiFIYTt5Mp3vhJBGNRiORCEmSn4NB4XgqniTTH8NnMO816ht1GiaSBEWRBAGeguQkePgF924AS6YgOFj/cJKkaPNDGE8kcRyMgChYNJaIQ+cIHCfxJOV7f0BCfIIg+0NxHzZ7YUiAJ+JxLDr+x59Ptsr3xsepeIiOh+kklkpiZDwKRsRjiRhOj9JGz7IJIkFQF5Mrl38rlgRrk0FX7u79gM1/F3z4bXjz/HD+QvjFhZHcxUg2jsVGU+keGModiVORh1JkDt1adn5frg5N7l+fOugb575JS18nhHOY+OVQ+6twCcew0zB0m4CS/2GwjD0w6YwtHSzlH/61On9vcWF8cYbOzP1468UXv5jnrhVhJ30E++3BXx0IuzzKHbkvjrznJbdQdrfLnfV9J7PtTGzaEzlvcuVtLIrB3uuB/e4mCLhadFUSBdaow9kCeehEngeHCQkVLnIDo0/BiXgSTJJkTdN5XlA1zbLsZstSVV1VtWbLdjp+oDLDfhaWZdk0TZ7ndV1XFKVahQtTVFW13W57ng+zLHtGZqlerwMD6xcEwTAMpSv4E0I0m82zYFGUAIC0jQbcjO/kduU4zv9lFuGIo06nY3dlddVu207bcl24gBDDnJkZZhzngTqBdzvg242WbbV9GD48N0Y+3zBYZrMry4brDk0VOufv2IMz7s9/t78f7yzk2WQMS6U+BbMs12pZ8PmBsuuG6TnWymsjNK3RSwaerWPZxtpWKYF9tEmOYZKAs54+MZoi6ds36bu36LGb9J1f6Xu30+lUCosmTi37XxYt04RLlyVOAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/blog/static/eb47909ff50e4eea57ccb846d793bca2/5a190/image.png\"\n        srcset=\"/blog/static/eb47909ff50e4eea57ccb846d793bca2/772e8/image.png 200w,\n/blog/static/eb47909ff50e4eea57ccb846d793bca2/e17e5/image.png 400w,\n/blog/static/eb47909ff50e4eea57ccb846d793bca2/5a190/image.png 800w,\n/blog/static/eb47909ff50e4eea57ccb846d793bca2/b4098/image.png 816w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>","timeToRead":5,"tableOfContents":"<ul>\n<li><a href=\"/blog/detail/1/#1-%E5%AE%89%E8%A3%85-codepush-cli\">1. 安装 CodePush CLI</a></li>\n<li><a href=\"/blog/detail/1/#2-%E6%B3%A8%E5%86%8C-codepush-%E8%B4%A6%E5%8F%B7\">2. 注册 CodePush 账号</a></li>\n<li><a href=\"/blog/detail/1/#3-%E6%B7%BB%E5%8A%A0-ios-%E5%B9%B3%E5%8F%B0%E5%BA%94%E7%94%A8\">3. 添加 ios 平台应用</a></li>\n<li>\n<p><a href=\"/blog/detail/1/#4-%E6%B7%BB%E5%8A%A0-android-%E5%B9%B3%E5%8F%B0%E5%BA%94%E7%94%A8\">4. 添加 android 平台应用</a></p>\n<ul>\n<li><a href=\"/blog/detail/1/#%E4%B8%8B%E9%9D%A2%E5%BC%80%E5%A7%8B%E6%95%B4%E5%90%88%E5%88%B0-react-native\">下面开始整合到 react-native</a></li>\n</ul>\n</li>\n<li><a href=\"/blog/detail/1/#5-react-native-%E4%B8%AD%E5%AE%89%E8%A3%85-code-push-%E7%BB%84%E4%BB%B6\">5. react-native 中安装 code-push 组件</a></li>\n<li><a href=\"/blog/detail/1/#6-%E6%B7%BB%E5%8A%A0%E5%8E%9F%E7%94%9F%E4%BE%9D%E8%B5%96%EF%BC%8C-%E4%BD%BF%E7%94%A8-link-%E5%88%B0-android-%E5%92%8C-ios-%E4%B8%AD\">6. 添加原生依赖， 使用 link 到 android 和 ios 中</a></li>\n<li><a href=\"/blog/detail/1/#7-%E5%B0%86-android-%E5%92%8C-ios-%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%E6%94%B9%E4%B8%BA-100\">7. 将 Android 和 ios 的版本号改为 1.0.0</a></li>\n<li><a href=\"/blog/detail/1/#8-%E5%9C%A8-react-native-%E9%A1%B9%E7%9B%AE%E4%B8%AD%E7%9A%84%E9%A6%96%E9%A1%B5%E4%B8%AD-%E4%BD%BF%E7%94%A8-code-push\">8. 在 react-native 项目中的首页中 使用 code-push</a></li>\n<li><a href=\"/blog/detail/1/#9-%E5%8F%91%E5%B8%83%E6%9B%B4%E6%96%B0\">9. 发布更新</a></li>\n</ul>","frontmatter":{"date":"2019-04-26","path":"/detail/1","title":"react-native code-push 热更新","featuredImage":{"childImageSharp":{"fluid":{"aspectRatio":1.6,"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAABQACBP/EABYBAQEBAAAAAAAAAAAAAAAAAAIBA//aAAwDAQACEAMQAAAB5WQdquxVmv/EABsQAAICAwEAAAAAAAAAAAAAAAECAAMREhMi/9oACAEBAAEFAujyskr6m5nVlAvbH//EABYRAQEBAAAAAAAAAAAAAAAAAAABEv/aAAgBAwEBPwGVp//EABgRAAIDAAAAAAAAAAAAAAAAAAACARET/9oACAECAQE/AWWzOT//xAAZEAACAwEAAAAAAAAAAAAAAAAAEAECMSH/2gAIAQEABj8CIwyq4v/EABoQAQEBAQADAAAAAAAAAAAAAAEAEUExUeH/2gAIAQEAAT8hU889SUm84yfYzAOPCxr/2gAMAwEAAgADAAAAEHAv/8QAFhEBAQEAAAAAAAAAAAAAAAAAEQAB/9oACAEDAQE/EA12F//EABYRAAMAAAAAAAAAAAAAAAAAABARIf/aAAgBAgEBPxBKB//EABoQAQADAQEBAAAAAAAAAAAAAAEAESFBMfD/2gAIAQEAAT8QwMLrFJEaVpT2Wco+ORajvN2CG7B2PZfSf//Z","sizes":"(max-width: 800px) 100vw, 800px","src":"/blog/static/90acab8182be9be58d90f635d317f380/14b42/featured.jpg","srcSet":"/blog/static/90acab8182be9be58d90f635d317f380/f836f/featured.jpg 200w,\n/blog/static/90acab8182be9be58d90f635d317f380/2244e/featured.jpg 400w,\n/blog/static/90acab8182be9be58d90f635d317f380/14b42/featured.jpg 800w,\n/blog/static/90acab8182be9be58d90f635d317f380/47498/featured.jpg 1200w,\n/blog/static/90acab8182be9be58d90f635d317f380/7f945/featured.jpg 1440w"}}}}}},"pageContext":{}}}